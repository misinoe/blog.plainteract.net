---
layout: post
title: WebNote4 2022年4月23日
tags:
- WebNote4
---

本日WebNote4のリリースを行いました。
主にクライアントサイドのリファクタリングと機能追加が行われています。
過去ログの表示に互換性があります。

変更点は次の通りです。

## 機能追加

* 新たにテキストツールが実装しました。
  - この機能を利用するにはログインが必要です。
* 画面上のテキストを右クリックする事で、テキストをクリップボードにコピーできるようになりました。
* Escキーで記述中の線や塗りを中断できるようになりました。
* アンドゥがより迅速に反映されるようになりました。
  - サーバーの応答を待たずにアンドゥデータを送信できるようになりました。
  - アンドゥすると1フレームでオブジェクトが削除されます。

## 仕様変更

* ブラシツールの表示方法が僅かに変更されました。
  - キャップが先鋭化するソフトウェア補正を削除し、より筆圧に忠実に表現されるようになりました。
* 全てのツールでネットワークレーテンシーを感じなくなるようにUXをアップデートしました。
  - データを送信した瞬間にクライアントサイドで仮描画を行い、サーバーからの応答のラグを全く無くします。
  - このアップデートは世界のユーザーにとって有益なアップデートです！
* ブラウザのタイトルバーにログインユーザー数を表示するようにしました。
  - これはWebNote3:LineArtの時に動作しなくなってしまった機能で、その復刻になります。

## 不具合の修正

* Altキーを押しながら描く事で多角形を正しく描画できなかった問題を解消しました。
* ブラシツールでShiftキーを押しながら直線を引けなかった問題を解消しました。
* ペン・ブラシ・サーフェースで始点の色が不正になっている不具合を修正しました。

## 最適化

* ペン・ブラシ・サーフェースツールの処理でArray.forEachをfor文に置き換えて僅かな処理の最適化を行いました。

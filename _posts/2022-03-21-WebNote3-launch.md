---
layout: post
title: WebNote3:LineArtアップデート情報 2022年3月21日
tags:
- WebNote
---

本日、WebNote3:LineArtをローンチしました。
WebNote2をリファクタリング・アップデートした物のため大きな仕様の変更はございません。またドメインも変更はありません。

変更点は以下の通りです。

## 絵チャット・フロントエンド
* 新しいツール `エアブラシ` が新規に実装されました。
  - 最小径 `1mm`
  - 最大径 `30mm`
  - 筆圧対応
  - この機能を利用するにはログインする必要があります。
* カンバスの枠外背景色を `#646464` から `#A0A0A0` に変更されました。
* 拡大時に表示される方眼グリッドのシェーダーをアップデートし、奇数番目の線の色を変更しました。
* ペンのサイズを `mm` 表記に変更
* レイヤーを `mm` 表記に変更
  - これは実際にカンバスからの距離を示しています。
* レイヤーの最大値を `50mm` に引き上げました。
  - 非ログイン時は `5mm` が上限となります。
* レイヤーの値はツール毎に個別に保持されるようになりました。

## ウェブサイト
* 独自実装だった多言語対応システムを `Next.js` フレームワーク標準の `i18n` 機能に変更しました。
  - URLのパスが言語毎に変更されます
    - 英語: https://lineart.plainteract.net/
    - 韓国語: https://lineart.plainteract.net/ko
    - 日本語: https://lineart.plainteract.net/ja
    - ロシア語: https://lineart.plainteract.net/ru

## システム
* `Redux` を廃止し全て `React` の `ContextAPI` に置き換えられました。
* `@mui` で非推奨となった機能 `makeStyles` を使用しなくなりました。
* 絵チャットのGUIをリファクタリングしました。
  - パーツ毎にコンポーネント分割
* 絵チャットのGUIをサーバーサイドレンダリングしないように変更しました。
* ソケットサーバーの処理をリファクタリングしました。

## 不具合の修正
* ツール切替時に `太さ` が正しくない値が設定される不具合を修正しました。
* エラーが発生し、ログが正しく表示されない事がある不具合を修正しました。
* アカウント作成直後、セッションがログイン状態にならない不具合を修正しました。
* CSSのスタイルが正しく適用されない場合がある不具合を修正しました。

## ログの仕様変更
* データ構造の変更により、本日以前のログが表示できなくなります。
